
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'/>
    <title>Absensi Kelas</title>

</head>
<body>
<h3>Aplikasi Absensi</h3>
<h4>Mohon masukan daftar kelas-kelas</h4>
<button type="button" onclick="submitkelas();">Submit Nama kelas</button>

<table id="daftarkelas" border="5"></table>
</body>
<script src="jquery-3.3.1.min.js"></script>
<script>
    var currentRow = -1;
    var kelas=null;
    var kelas = {};
    function submitkelas(){
        var listKelas = [];

        
        for (var i = 0; i < currentRow; i++){
            //kelas[i] = $("#datakelas"+i);
            var k =  $("#datakelas"+i);
            if (k==null){continue;}
            listKelas.push(k.html());
        }
        kelas["daftarKelas"] = listKelas;
    }       

    function getRowInput(){
        currentRow++; 
        return "<tr id='row"+currentRow+"'><td><input type='text' id='inputkelas"+currentRow+"'/> <button type='button' onclick='tambahkelas()'>Tambah</button> </td></tr>"; 
    }

    function hapusRow(id){
        console.log("rowNow"+id);
        $("#rowNow"+id).remove();
    }

    function editRow(id){
        console.log("edit datakelas"+id);
        var nama = prompt("Edit "+$("#datakelas"+id).html()+" menjadi: ");
        if (nama){
            $("#datakelas"+id).html(nama);  
        }
        
    }
    function absenKelas(id){
        localStorage.kelas = $("#datakelas"+id).html();
        window.location="absen_kelas.html";
        
    }

    function tambahkelas(){ 
        var rowIndex = currentRow;
        var namaInput = $("#inputkelas"+rowIndex).val();
        if (namaInput==""){
            if (!confirm("Nama kelas kosong? ")){
                return;
            }
        }
        
        kelas.html(kelas.html()+"<tr id='rowNow"+rowIndex+"'><td><p id='datakelas"+rowIndex+"'>"+namaInput+"</p></td><td><button type='button' onclick='hapusRow("+String(rowIndex)+");'>Hapus</button></td><td><button type='button' onclick='editRow("+String(rowIndex)+");'>Edit</button></td><td><button type='button' onclick='absenKelas("+String(rowIndex)+");'>Absen Kelas</button></td></tr>");
        $("#row"+currentRow).remove();
        kelas.html(kelas.html()+getRowInput());
    }

    function main(){
        kelas = $("#daftarkelas");
        kelas.html(kelas.html()+getRowInput());
    }

    main();
    
</script>
</html>